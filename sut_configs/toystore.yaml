config:
  # The name of the SUT
  sut: "toystore"
  namespace: "toystore"
  sut_git_repo: "https://github.com/clue2-sose25/sustainable_toystore"
  sut_path: "toystore"
  helm_chart_path: "toystore/toystore"
  values_yaml_name: "values.yaml"
  workload_target: "teastore-webui"
  application_endpoint_path: "/tools.descartes.teastore.webui"
  default_resource_limits:
    cpu: 1000
    memory: 1024
  wait_before_workloads: 120
  wait_after_workloads: 120

helm_replacements:
  - value: "ghcr.io/clue2-sose25/sustainable_toystore/backend"
    replacement: "registry:5000/clue/toystore-backend"
  - value: "ghcr.io/clue2-sose25/sustainable_toystore/frontend"
    replacement: "registry:5000/clue/toystore-frontend"
  - value: 'tag: "latest"'
    replacement: 'tag: "__EXPERIMENT_TAG__"'

workloads:
  - name: "shaped"
    description: "Workload with custom load shape behavior."
    timeout_duration: 120
    workload_runtime: 64
    workload_settings: {}
    locust_files:
      - "sut_configs/workloads/toystore/locustfile.py"

resource_limits: []

variants:
  - name: "baseline"
    description: "A ToyStore application storing its data in a local SQLite DB"
    target_branch: "baseline"
    colocated_workload: true
    critical_services: ["toystore-frontend", "toystore-backend"]
    autoscaling: "cpu"
  - name: "postgres"
    description: "A ToyStore application using external Postgres DB"
    target_branch: "postgres"
    colocated_workload: true
    critical_services: ["toystore-frontend", "toystore-backend", "toystore-db"]
    autoscaling: "cpu"
